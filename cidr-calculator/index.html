<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIDR Calculator - Emira Labs</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        form { margin-bottom: 20px; }
        label { display: block; margin: 10px 0 5px; }
        input { padding: 8px; width: 200px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        #result { margin-top: 20px; padding: 10px; background: #f9f9f9; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>CIDR Calculator</h1>
    <p>Enter an IP address and CIDR prefix to calculate network details.</p>
    <form id="cidrForm">
        <label for="ip">IP Address:</label>
        <input type="text" id="ip" placeholder="e.g., 192.168.1.1" required>
        
        <label for="cidr">CIDR Prefix:</label>
        <input type="number" id="cidr" min="0" max="32" placeholder="e.g., 24" required>
        
        <button type="submit">Calculate</button>
    </form>
    <div id="result"></div>

    <script>
        document.getElementById('cidrForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const ip = document.getElementById('ip').value;
            const cidr = parseInt(document.getElementById('cidr').value);
            const result = calculateCIDR(ip, cidr);
            document.getElementById('result').innerHTML = result;
        });

        function calculateCIDR(ip, cidr) {
            const ipParts = ip.split('.').map(Number);
            if (ipParts.length !== 4 || ipParts.some(p => p < 0 || p > 255)) {
                return '<p>Invalid IP address.</p>';
            }
            const ipBinary = ipParts.map(p => p.toString(2).padStart(8, '0')).join('');
            const networkBinary = ipBinary.substring(0, cidr) + '0'.repeat(32 - cidr);
            const broadcastBinary = ipBinary.substring(0, cidr) + '1'.repeat(32 - cidr);
            
            const networkIP = binaryToIP(networkBinary);
            const broadcastIP = binaryToIP(broadcastBinary);
            const firstHost = cidr < 31 ? binaryToIP(networkBinary.substring(0, 31) + '1') : networkIP;
            const lastHost = cidr < 31 ? binaryToIP(broadcastBinary.substring(0, 31) + '0') : broadcastIP;
            const totalHosts = cidr <= 30 ? Math.pow(2, 32 - cidr) : 1;
            const usableHosts = cidr <= 30 ? totalHosts - 2 : 1;
            
            return `
                <p><strong>Network Address:</strong> ${networkIP}/${cidr}</p>
                <p><strong>Broadcast Address:</strong> ${broadcastIP}</p>
                <p><strong>First Host:</strong> ${firstHost}</p>
                <p><strong>Last Host:</strong> ${lastHost}</p>
                <p><strong>Total Hosts:</strong> ${totalHosts}</p>
                <p><strong>Usable Hosts:</strong> ${usableHosts}</p>
            `;
        }

        function binaryToIP(binary) {
            return [
                parseInt(binary.substring(0, 8), 2),
                parseInt(binary.substring(8, 16), 2),
                parseInt(binary.substring(16, 24), 2),
                parseInt(binary.substring(24, 32), 2)
            ].join('.');
        }
    </script>
</body>
</html>